<script type="text/javascript">
  var strLineaNegocio="";
  var strCategoria="";
  var strProducto="";

  function ShowSelected()
  {
    
    alert(document.getElementById("runEvery").value)
    /* VALUE */
    /*strLineaNegocio = document.getElementById("lineaNegocio").value;
    strCategoria = document.getElementById("categoria").value;
    strProducto = document.getElementById("producto").value;*/
    //alert(strLineaNegocio)
    
    /* TEXT */
    /*var combo = document.getElementById("lineaNegocio");
    var selected = combo.options[combo.selectedIndex].text;*/
  }

  function checkFullParam1(username,password,project,root_url,process_name){
    full=false

    if(username==""){
      alert("The user name shouldn't be empty");
    }else if(password==""){
      alert("The password shouldn't be empty");
    }else if(project==""){
      alert("The project shouldn't be empty");
    }else if(root_url==""){
      alert("The root URL shouldn't be empty");
    }else if(process_name==""){
      alert("The process name shouldn't be empty");
    }else{
      full=true
    }
    return full
  }

  function launch(){
    //Mandatory parameters
    username=document.getElementById("username").value;
    password=document.getElementById("password").value;
    project=document.getElementById("project").value;
    root_url=document.getElementById("root_url").value;
    process_name=document.getElementById("process_name").value;

    //Optional parameters
    thread_count=document.getElementById("thread_count").value;
    instance_limit=document.getElementById("instance_limit").value;
    business_data=document.getElementById("business_data").value;

    
    correctParam=checkFullParam1(username,password,project,root_url,process_name)
    if(correctParam){
      alert("All data correct. username: "+username+", password: "+password+", project: "+project+",root URL: "+root_url+", process_name: "+process_name);
    }
    
  }

  function existingProject(){
    elementExistingProject = document.getElementById("existingProject");
    elementNewProject = document.getElementById("newProject");

    elementExistingProject.removeAttribute("hidden");
    elementNewProject.setAttribute("hidden", "hidden");

    document.getElementById("projectName").value = "";
    document.getElementById("organizationKey2").value = "";
  }
  function newProject(){
    elementExistingProject = document.getElementById("existingProject");
    elementNewProject = document.getElementById("newProject");

    elementNewProject.removeAttribute("hidden");
    elementExistingProject.setAttribute("hidden", "hidden");

    document.getElementById("projectKey").value = "";
    document.getElementById("organizationKey1").value = "";
  }

  function checkFullParam2(url,userID,api_key,projectKey,organizationKey1,projectName,organizationKey2){
    full=false

    if(url==""){
      alert("The url shouldn't be empty");
    }else if(userID==""){
      alert("The user ID shouldn't be empty");
    }else if(api_key==""){
      alert("The API key shouldn't be empty");
    }else if(organizationKey1=="" && organizationKey2==""){
      alert("You should fill in the organization key of one of the options correctly ");
    }else if(organizationKey1!="" && projectKey==""){
      alert("The project key shouldn't be empty");
    }else if(organizationKey2!="" && projectName==""){
      alert("The project name shouldn't be empty");
    }else{
      full=true
    }
    return full
  }


  function launchPM(){
    //Mandatory
    url=document.getElementById("url").value;
    userID=document.getElementById("userID").value;
    api_key=document.getElementById("api_key").value;
    
    //Option 1 - Existing project
    projectKey=document.getElementById("projectKey").value;
    organizationKey1=document.getElementById("organizationKey1").value;
    
    //Option 2 - New project
    projectName=document.getElementById("projectName").value;
    organizationKey2=document.getElementById("organizationKey2").value;

    organizationKey=""
    if(organizationKey1!=""){
      organizationKey=organizationKey1
    }else{
      organizationKey=organizationKey2
    }
    
    correctParam=checkFullParam2(url,userID,api_key,projectKey,organizationKey1,projectName,organizationKey2)
    if(correctParam){
      //,"thread_count":thread_count,"instance_limit":instance_limit,"modified_before":modified_before,"modified_after":modified_after,"business_data":business_data
      alert("The dataset is being loaded in IBM Process Mining. \n Please consult the terminal to see status");
      execute_python('/executeScript_processMining/',{"url":url,"user_id":userID,"api_key":api_key,"project_key":projectKey,"org_key":organizationKey,"project_name":projectName});
      
    }  
  }


  function execute_python(url,data){
      const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
      fetch(url, {method: "POST", headers: {'X-CSRFToken': csrftoken}, body: JSON.stringify(data)});  
   }

   function loadinPM(){
    elementAll = document.getElementById("all");
    tableLoadPM = document.getElementById("tableLoadPM");

    elementAll.removeAttribute("hidden");
    tableLoadPM.setAttribute("hidden", "hidden");
   }



</script>

<!DOCTYPE html>

<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Automation BAW</title>
    <link href='https://fonts.googleapis.com/css?family=IBM Plex Sans' rel='stylesheet'>
    <style>
      body {
        font-family: 'IBM Plex Sans';font-size: 22px;
      }
      .btn_mod {
        border: none;
        background-color: inherit;
        padding: 14px 28px;
        font-size: 16px;
        cursor: pointer;
        display: inline-block;
      }
      
      .btn:hover {background: #eee;}
      
      .black {color: rgb(3, 3, 3);}
      .blue {color: rgb(13, 93, 173);}
      </style>
    </head>


      <TR><TD><br></TD></TR>
      <table>
        
          <TD>
            <table>
              <TR >
                <TD align="center" colspan="4"><button class="btn_mod black" onclick="location.href='/historicalAnalysis/'">Historical analysis </button> &nbsp;&nbsp;&nbsp; <button class="btn_mod blue" onclick="location.href='/monitoring/'"><b><u>Monitoring </u></b></button>
              </TR>
              <TR><TD>&nbsp;</TD></TR>
              <TR><TD>&nbsp;</TD></TR>
              <TR>
                <TD align="center" colspan="4"> <h1>Monitoring configuration</h1> </TD>
              </TR>
              
              <TR><TD>&nbsp;</TD></TR>
              <TR><TD>&nbsp;</TD></TR>

              <TR>
                <TD colspan="2"> <h3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Mandatory configuration</h3> </TD>
                <TD colspan="2"> <h3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Optional configuration</h3> </TD>
              </TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Username*</TD>
              <TD><input type="text" id="username" size="40"></TD>

              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread count</TD>
              <TD><input type="text" id="thread_count" size="40"></TD>
            </TR>
            <TR>
              <TD></TD>
              <TD><div style="color:#797676" class="bx--form__helper-text"><i>Your user ID</i></div></TD></TD>

              <TD></TD>
              <TD><div style="color:#797676" class="bx--form__helper-text"><i>Number of threads</i></div></TD></TD>
            </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Password*</TD>
              <TD><input type="text" id="password" size="40"></TD>

              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Instance limit</TD>
              <TD><input type="text" id="instance_limit" size="40"></TD>
            </TR>
            <TR>
              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Your password</i></div></TD></TD>

              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Maximum number of instances to be retrieved</i></div></TD></TD>
            </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Project*</TD>
              <TD><input type="text" id="project" size="40"></TD>

              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Business data</TD>
              <TD><textarea id="business_data" rows="5" cols="50"></textarea></TD>
            </TR>
            <TR>
              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Your project</i></div></TD></TD>
              
              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Insert your business data separated by ;.<br> Example: country,gender,age,name</i></div></TD></TD>
            

            </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Root URL*</TD>
              <TD><input type="text" id="root_url" size="40"></TD>


            </TR>
            <TR>
              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Root URL</i></div></TD></TD>


            </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Process name*</TD>
              <TD><input type="text" id="process_name" size="40"></TD>


            </TR>
            <TR>
              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Process name</i></div></TD></TD>

              </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Run every*</TD>
              <TD>
                <select name="runEvery" id="runEvery" style="width:200px" onchange="ShowSelected();">
                  <option value="">Select</option> 
                  <option value="15minutes">15 minutes</option>
                  <option value="2h">2 hours</option>
                  <option value="everyDay">Every day</option> 
                  <option value="everyWeek">Every week</option> 
                </select>
              </TD>
            </TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Extraction hour*</TD>
              <TD>
                <select name="extractionHour" id="extractionHour" style="width:200px" onchange="ShowSelected();">
                  <option value="">Select</option> 
                  <option value="00:00">00:00</option>
                  <option value="01:00">01:00</option>
                  <option value="02:00">02:00</option>
                  <option value="03:00">03:00</option>
                  <option value="04:00">04:00</option>
                  <option value="05:00">05:00</option>
                  <option value="06:00">06:00</option>
                  <option value="07:00">07:00</option>
                  <option value="08:00">08:00</option>
                  <option value="09:00">09:00</option>
                  <option value="10:00">10:00</option>
                  <option value="11:00">11:00</option>
                  <option value="12:00">12:00</option>
                  <option value="13:00">13:00</option>
                  <option value="14:00">14:00</option>
                  <option value="15:00">15:00</option>
                  <option value="16:00">16:00</option>
                  <option value="17:00">17:00</option>
                  <option value="18:00">18:00</option>
                  <option value="19:00">19:00</option>
                  <option value="20:00">20:00</option>
                  <option value="21:00">21:00</option>
                  <option value="22:00">22:00</option>
                  <option value="23:00">23:00</option>
                  <option value="24:00">24:00</option>

                </select>
              </TD>
            </TR>


            <TR><TD>&nbsp;</TD></TR>
            <TR><TD>&nbsp;</TD></TR>
            <TR >
              <TD align="center" colspan="4"><button style="height:30px;width:250px" class="btn info" onclick="launch()"><b>Download CSV file locally</b> </button>  </TD>
            </TR>
            <TR >
            <TR><TD>&nbsp;</TD></TR>
              <TD align="center" colspan="4">
            <table id="tableLoadPM" colspan="4"> 
            <TR >
              <TD align="center" colspan="4"><button style="height:30px;width:300px" class="btn info" onclick="loadinPM()"><b>Load file to Process Mining (optional)</b> </button>  </TD>
            </TR>
          </table>
          </TD>
        </TR>
            <TD align="center" colspan="4">
            <table id="all" colspan="4" hidden>
            <TR >
              <TD align="left" colspan="4">
                <button style="height:30px;width:250px" class="btn info" onclick="existingProject()"><b>Load into an existing project</b> </button>
                <button style="height:30px;width:250px" class="btn info" onclick="newProject()"><b>Create new project</b> </button>
              </TD>
            </TR>
          </table>
          </TD>

            </table>
          </TD>
        </TR>
      </table>

            </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR><TD>&nbsp;</TD></TR>
            

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD colspan="2">
                <table id="existingProject" hidden >
                  <TR>
                    <TD colspan="2" > 
                      <span style=" color:rgb(13, 93, 173);"><h2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Option 1</h2></span>
                      <h3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Load into an existing project</h3> 
                      <i></i><div style="color:#797676" class="bx--form__helper-text"><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uploads a new dataset to an existing project</i></div>
                      <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; URL*</TD>
              <TD><input type="text" id="url" size="40"></TD>
            </TR>
            <TR>
              <TD></TD>
              <TD><div style="color:#797676" class="bx--form__helper-text"><i>Process mining URL</i></div></TD></TD>
            </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; User ID*</TD>
              <TD><input type="text" id="userID" size="40"></TD>
            </TR>
            <TR>
              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Example: admin</i></div></TD></TD>
            </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; API key*</TD>
              <TD><input type="text" id="api_key" size="40"></TD>

            </TR>
            <TR>
              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Example: nl81f55*****</i></div></TD></TD>
            </TR>
                    </TD>
                  </TR>
                  <TR><TD>&nbsp;</TD></TR>
                  <TR>
                    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Project key*</TD>
                    <TD><input type="text" id="projectKey" size="40"></TD>
                  </TR>
                  <TR>
                    <TD></TD>
                    <TD><div style="color:#797676" class="bx--form__helper-text"><i>Example: HR-process</i></div></TD></TD>
                  </TR>
                  <TR><TD>&nbsp;</TD></TR>
                  <TR>
                    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Organization key*</TD>
                    <TD><input type="text" id="organizationKey1" size="40"></TD>
                  </TR>
                  <TR>
                    <TD></TD>
                    <TD><div style="color:#797676" class="bx--form__helper-text"><i>Example: 90d0xcd3</i></div></TD></TD>
                    <TR >
              <TD align="center" colspan="4"><button class="btn info" onclick="launchPM()"><b>Launch into PM</b> </button>  </TD>
            </TR>
                  </TR>
                </table>
                <table id="newProject" hidden >
                  <TR>
                    <TD colspan="2" > 
                      <span style=" color:rgb(13, 93, 173);"><h2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Option 2</h2></span>
                      <h3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create new project</h3> 
                      <i></i><div style="color:#797676" class="bx--form__helper-text"><i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new project with the specified title in the target organization.</i></div>
                      <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; URL*</TD>
              <TD><input type="text" id="url" size="40"></TD>
            </TR>
            <TR>
              <TD></TD>
              <TD><div style="color:#797676" class="bx--form__helper-text"><i>Process mining URL</i></div></TD></TD>
            </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; User ID*</TD>
              <TD><input type="text" id="userID" size="40"></TD>
            </TR>
            <TR>
              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Example: admin</i></div></TD></TD>
            </TR>

            <TR><TD>&nbsp;</TD></TR>
            <TR>
              <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; API key*</TD>
              <TD><input type="text" id="api_key" size="40"></TD>

            </TR>
            <TR>
              <TD></TD>
              <TD><i></i><div style="color:#797676" class="bx--form__helper-text"><i>Example: nl81f55*****</i></div></TD></TD>
                    </TD>
                  </TR>
                  <TR><TD>&nbsp;</TD></TR>
                  <TR>
                    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Project name*</TD>
                    <TD><input type="text" id="projectName" size="40"></TD>
                  </TR>
                  <TR>
                    <TD></TD>
                    <TD><div style="color:#797676" class="bx--form__helper-text"><i>New project name</i></div></TD></TD>
                  </TR>
                  <TR><TD>&nbsp;</TD></TR>
                  <TR>
                    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Organization key*</TD>
                    <TD><input type="text" id="organizationKey2" size="40"></TD>
                  </TR>
                  <TR>
                    <TD></TD>
                    <TD><div style="color:#797676" class="bx--form__helper-text"><i>Example: 90d0xcd3</i></div></TD></TD>
                    <TR >
              <TD align="center" colspan="4"><button class="btn info" onclick="launchPM()"><b>Launch into PM</b> </button>  </TD>
            </TR>
                  </TR>
                </table>
              </TD>
            </TR>
          
            <TR><TD>&nbsp;</TD></TR>
            <TR><TD>&nbsp;</TD></TR>
            
            </table>
          </TD>
        </TR>
      </table>
      </form>

          

</html>




